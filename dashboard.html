<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;background:#f4f4f4;padding:10px}
.box{background:#fff;padding:12px;border-radius:6px;margin-bottom:15px}
input,select,textarea,button{width:100%;padding:8px;margin:5px 0}
button{background:#111;color:#fff;border:none;border-radius:4px}
.product{border-bottom:1px solid #ddd;padding:8px 0}
small{color:gray}
</style>
</head>

<body>

<h2>ðŸ“¦ Admin Dashboard</h2>

<!-- CATEGORY -->
<div class="box">
<h3>Add Category</h3>
<input id="catName" placeholder="Category Name">
<button onclick="addCategory()">Add Category</button>
</div>

<!-- PRODUCT -->
<div class="box">
<h3>Add Product</h3>

<input id="pName" placeholder="Product Name">
<select id="pCat"></select>
<input id="pPrice" placeholder="Price">
<textarea id="pImages" placeholder="Image URLs (one per line)"></textarea>
<input id="pVideo" placeholder="YouTube Video URL (optional)">
<button onclick="addProduct()">Add Product</button>
</div>

<!-- PRODUCT LIST -->
<div class="box">
<h3>All Products</h3>
<div id="productList">Loading...</div>
</div>

<script>
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT"
});

const db = firebase.firestore();

/* CATEGORY */
async function loadCategory(){
  const sel = document.getElementById("pCat");
  sel.innerHTML="";
  const snap = await db.collection("categories").get();
  snap.forEach(doc=>{
    sel.innerHTML+=`<option value="${doc.data().name}">${doc.data().name}</option>`;
  });
}

function addCategory(){
  const name = catName.value.trim();
  if(!name) return alert("Enter category");
  db.collection("categories").add({name});
  catName.value="";
  loadCategory();
}

/* PRODUCT */
function addProduct(){
  const images = pImages.value.split("\n").filter(i=>i);
  db.collection("products").add({
    name: pName.value,
    category: pCat.value,
    price: pPrice.value,
    images: images,
    video: pVideo.value,
    time: Date.now()
  });
  alert("Product added");
  pName.value=pPrice.value=pImages.value=pVideo.value="";
  loadProducts();
}

async function loadProducts(){
  const box=document.getElementById("productList");
  box.innerHTML="";
  const snap=await db.collection("products").orderBy("time","desc").get();
  snap.forEach(doc=>{
    const p=doc.data();
    box.innerHTML+=`
      <div class="product">
        <b>${p.name}</b><br>
        à§³ ${p.price}<br>
        <small>${p.category}</small>
      </div>
    `;
  });
}

loadCategory();
loadProducts();
</script>

</body>
</html>
